%% ArchPilot Core - é¡¹ç›®éƒ¨ç½²æµç¨‹å›¾
%% å±•ç¤ºä» Core æ¡†æ¶éƒ¨ç½²åˆ°å…·ä½“é¡¹ç›®çš„å®Œæ•´æµç¨‹

flowchart TB
    subgraph Core["ğŸ“¦ ArchPilot Coreï¼ˆæºæ¡†æ¶ï¼‰"]
        direction TB
        C_GOV["Governance/<br/>æ²»ç†è§„åˆ™"]
        C_AGENT["Agents/<br/>Agent å®šä¹‰"]
        C_GUIDE["Guides/<br/>AI æŒ‡å—"]
        C_PROMPT["Prompts/<br/>Prompt æ¨¡æ¿"]
        C_SCRIPT["Scripts/<br/>è„šæœ¬æ¨¡æ¿"]
    end

    subgraph Deploy["ğŸš€ ä¸€é”®éƒ¨ç½²è„šæœ¬"]
        direction TB
        D_CMD["./deploy_project.sh<br/>my_project /path"]
        D_MODE{"éƒ¨ç½²æ¨¡å¼"}
        D_FULL["å®Œæ•´æ¨¡å¼<br/>-f --full"]
        D_STD["æ ‡å‡†æ¨¡å¼<br/>ï¼ˆé»˜è®¤ï¼‰"]
        D_MIN["æœ€å°æ¨¡å¼<br/>-m --minimal"]
    end

    subgraph Project["ğŸ¯ ç”Ÿæˆçš„é¡¹ç›®ï¼ˆmy_projectï¼‰"]
        direction TB

        subgraph P_GOV["Governance/ æ²»ç†å±‚"]
            P_ARCH["ARCHITECTURE_DEFINITION.md"]
            P_GLOSS["GLOSSARY.md"]
            P_RULES["rules/*.md"]
            P_CHECK["checklists/*.md"]
            P_TPL["templates/*.md"]
        end

        subgraph P_L1L5["L1-L5 æ¶æ„å±‚"]
            P_L1["L1_Requirements/"]
            P_L2["L2_Architecture/"]
            P_L3["L3_DetailDesign/"]
            P_L4["L4_Implementation/"]
            P_L5["L5_Verification/"]
        end

        subgraph P_AI["AI è¾…åŠ©å±‚"]
            P_AGENT["Agents/*.md"]
            P_GUIDE["Guides/*.md"]
            P_PROMPT["Prompts/*.md"]
        end

        subgraph P_OTHER["å…¶ä»–æ–‡ä»¶"]
            P_README["README.md"]
            P_VERSION["VERSION"]
            P_GIT[".gitignore"]
        end
    end

    subgraph Workflow["ğŸ“‹ åç»­å·¥ä½œæµ"]
        direction LR
        W1["1. å®šåˆ¶åŒ–é…ç½®"]
        W2["2. åˆ›å»º L1 éœ€æ±‚"]
        W3["3. AI è¾…åŠ©è®¾è®¡"]
        W4["4. L1â†’L5 é—­ç¯"]
    end

    %% éƒ¨ç½²æµç¨‹è¿æ¥
    Core --> Deploy
    D_CMD --> D_MODE
    D_MODE --> D_FULL
    D_MODE --> D_STD
    D_MODE --> D_MIN

    D_FULL --> Project
    D_STD --> Project
    D_MIN --> Project

    %% Core åˆ° Project çš„æ˜ å°„
    C_GOV -.->|å¤åˆ¶| P_GOV
    C_AGENT -.->|å¤åˆ¶| P_AGENT
    C_GUIDE -.->|å¤åˆ¶| P_GUIDE
    C_PROMPT -.->|å¤åˆ¶ï¼ˆæ ‡å‡†/å®Œæ•´ï¼‰| P_PROMPT
    C_SCRIPT -.->|å¤åˆ¶ï¼ˆæ ‡å‡†/å®Œæ•´ï¼‰| P_OTHER

    %% Project åˆ° Workflow
    Project --> Workflow
    W1 --> W2 --> W3 --> W4

    %% æ ·å¼
    classDef coreStyle fill:#e1f5fe,stroke:#01579b
    classDef deployStyle fill:#fff3e0,stroke:#e65100
    classDef projectStyle fill:#e8f5e9,stroke:#2e7d32
    classDef workflowStyle fill:#f3e5f5,stroke:#7b1fa2

    class Core coreStyle
    class Deploy deployStyle
    class Project projectStyle
    class Workflow workflowStyle
