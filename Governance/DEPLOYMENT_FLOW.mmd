%% ArchPilot Core - é¡¹ç›®éƒ¨ç½²æµç¨‹å›¾
%% å±•ç¤ºä» Core æ¡†æ¶éƒ¨ç½²åˆ°å…·ä½“é¡¹ç›®çš„å®Œæ•´æµç¨‹

flowchart TB
    subgraph Core["ğŸ“¦ ArchPilot Coreï¼ˆæºæ¡†æ¶ï¼‰"]
        direction TB
        C_GOV["Governance/<br/>æ²»ç†è§„åˆ™"]
        C_AGENT["Agents/<br/>Agent å®šä¹‰"]
        C_GUIDE["Guides/<br/>AI æŒ‡å—"]
        C_PROMPT["Prompts/<br/>Prompt æ¨¡æ¿"]
        C_SCRIPT["Scripts/<br/>è„šæœ¬æ¨¡æ¿"]
    end

    subgraph Deploy["ğŸš€ ä¸€é”®éƒ¨ç½²è„šæœ¬"]
        direction TB
        D_CMD["./deploy_project.sh<br/>my_project /path"]
        D_OPT["å¯é€‰å‚æ•°<br/>-i åˆå§‹åŒ–Git"]
    end

    subgraph Project["ğŸ¯ ç”Ÿæˆçš„é¡¹ç›®ï¼ˆmy_projectï¼‰"]
        direction TB

        subgraph P_CORE["archpilot/ æ ¸å¿ƒæ¡†æ¶å±‚<br/>ï¼ˆé€šç”¨ã€ç¨³å®šã€ä¸å˜ï¼‰"]
            direction TB

            subgraph P_GOV["Governance/ æ²»ç†è§„åˆ™"]
                P_ARCH["ARCHITECTURE_DEFINITION.md"]
                P_GLOSS["GLOSSARY.md"]
                P_RULES["rules/*.md"]
                P_CHECK["checklists/*.md"]
                P_TPL["templates/*.md"]
            end

            subgraph P_AI["AI è¾…åŠ©"]
                P_AGENT["Agents/*.md"]
                P_GUIDE["Guides/*.md"]
                P_PROMPT["Prompts/*.md"]
            end

            P_SCRIPT["Scripts/*.py"]
        end

        subgraph P_CUSTOM["é¡¹ç›®æ ¹ç›®å½•<br/>ï¼ˆå®šåˆ¶åŒ–å¼€å‘åŒºï¼‰"]
            direction TB

            subgraph P_L1L5["L1-L5 æ¶æ„å±‚"]
                P_L1["L1_Requirements/"]
                P_L2["L2_Architecture/"]
                P_L3["L3_DetailDesign/"]
                P_L4["L4_Implementation/"]
                P_L5["L5_Verification/"]
            end

            subgraph P_OTHER["é¡¹ç›®æ–‡ä»¶"]
                P_README["README.md"]
                P_VERSION["VERSION"]
                P_GIT[".gitignore"]
                P_RELEASE["ReleaseNote/"]
            end
        end
    end

    subgraph Workflow["ğŸ“‹ åç»­å·¥ä½œæµ"]
        direction LR
        W1["1. å®šåˆ¶åŒ–é…ç½®"]
        W2["2. åˆ›å»º L1 éœ€æ±‚"]
        W3["3. AI è¾…åŠ©è®¾è®¡"]
        W4["4. L1â†’L5 é—­ç¯"]
    end

    %% éƒ¨ç½²æµç¨‹è¿æ¥
    Core --> Deploy
    Deploy --> Project

    %% Core åˆ° Project çš„æ˜ å°„ï¼ˆå®Œæ•´éƒ¨ç½²ï¼‰
    C_GOV -.->|å¤åˆ¶åˆ° archpilot/| P_GOV
    C_AGENT -.->|å¤åˆ¶åˆ° archpilot/| P_AGENT
    C_GUIDE -.->|å¤åˆ¶åˆ° archpilot/| P_GUIDE
    C_PROMPT -.->|å¤åˆ¶åˆ° archpilot/| P_PROMPT
    C_SCRIPT -.->|å¤åˆ¶åˆ° archpilot/| P_SCRIPT

    P_CORE -.->|å¼•ç”¨| P_CUSTOM

    %% Project åˆ° Workflow
    Project --> Workflow
    W1 --> W2 --> W3 --> W4

    %% æ ·å¼å®šä¹‰ï¼ˆä¼˜åŒ–é…è‰²ï¼‰
    classDef coreStyle fill:#bbdefb,stroke:#1565c0,stroke-width:3px,color:#000
    classDef deployStyle fill:#ffe0b2,stroke:#ef6c00,stroke-width:3px,color:#000
    classDef projectStyle fill:#c8e6c9,stroke:#2e7d32,stroke-width:3px,color:#000
    classDef workflowStyle fill:#e1bee7,stroke:#6a1b9a,stroke-width:3px,color:#000
    classDef archpilotStyle fill:#fff9c4,stroke:#f57f17,stroke-width:2px,color:#000
    classDef customStyle fill:#b2dfdb,stroke:#00695c,stroke-width:2px,color:#000

    class Core coreStyle
    class Deploy deployStyle
    class Project projectStyle
    class Workflow workflowStyle
    class P_CORE archpilotStyle
    class P_CUSTOM customStyle
