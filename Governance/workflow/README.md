# ArchPilot 工作流体系总览

**版本**: v1.0.0  
**最后更新**: 2026-02-01  
**目的**: 定义项目全生命周期的工作流，指导研发人员在不同阶段介入和执行

---

## 1. 工作流体系架构

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         ArchPilot 工作流体系                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                    例行工作流（Routine）                          │   │
│  │  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐          │   │
│  │  │  规划流  │ → │  设计流  │ → │  实现流  │ → │  发布流  │          │   │
│  │  │ Planning│   │ Design  │   │ Implement│   │ Release │          │   │
│  │  └─────────┘   └─────────┘   └─────────┘   └─────────┘          │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                    临时工作流（Ad-hoc）                            │   │
│  │  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐          │   │
│  │  │ 问题修复 │   │ 需求变更 │   │ 技术评审 │   │ 紧急发布 │          │   │
│  │  │ Bugfix  │   │ Change  │   │ Review  │   │ Hotfix  │          │   │
│  │  └─────────┘   └─────────┘   └─────────┘   └─────────┘          │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │                    支撑工作流（Support）                           │   │
│  │  ┌─────────┐   ┌─────────┐   ┌─────────┐                         │   │
│  │  │ 质量检查 │   │ 追溯验证 │   │ 文档同步 │                         │   │
│  │  │ Quality │   │ Trace   │   │ DocSync │                         │   │
│  │  └─────────┘   └─────────┘   └─────────┘                         │   │
│  └──────────────────────────────────────────────────────────────────┘   │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2. 工作流分类

### 2.1 例行工作流（Routine Workflow）

| 工作流 | 文件 | 触发条件 | 周期 |
|--------|------|----------|------|
| 规划工作流 | `flow_planning.md` | 新项目启动 / 新Phase开始 | Phase级 |
| 设计工作流 | `flow_design.md` | 需求确定后 | 迭代级 |
| 实现工作流 | `flow_implement.md` | 设计评审通过后 | 日常 |
| 发布工作流 | `flow_release.md` | 迭代完成 / 里程碑达成 | 迭代级 |

### 2.2 临时工作流（Ad-hoc Workflow）

| 工作流 | 文件 | 触发条件 | 紧急度 |
|--------|------|----------|--------|
| 问题修复工作流 | `flow_bugfix.md` | Bug 发现 | 中 |
| 需求变更工作流 | `flow_change.md` | 需求变更请求 | 中 |
| 技术评审工作流 | `flow_review.md` | 方案需评审 | 低 |
| 紧急发布工作流 | `flow_hotfix.md` | 线上紧急问题 | 高 |

### 2.3 支撑工作流（Support Workflow）

| 工作流 | 文件 | 触发条件 | 周期 |
|--------|------|----------|------|
| 质量检查工作流 | `flow_quality.md` | 发布前 / 定期 | 迭代级 |
| 追溯验证工作流 | `flow_trace.md` | 文档变更后 | 日常 |
| 文档同步工作流 | `flow_docsync.md` | 代码变更后 | 日常 |

---

## 3. 工作流与 L1-L5 架构映射

```
工作流阶段          L1-L5 层级对应          主要产出物
─────────────────────────────────────────────────────────
规划（Planning）    -                       Phase计划、子系统划分
    │
    ▼
设计（Design）      L1 需求层               FR_xxx 需求文档
    │               L2 架构层               SA_xxx 架构文档
    │               L3 设计层               DD_xxx 设计文档
    ▼
实现（Implement）   L4 实现层               代码文件
    │
    ▼
发布（Release）     L5 验证层               TC_xxx 测试用例
                    -                       ReleaseNote、Tag
```

---

## 4. Phase 与迭代划分

### 4.1 Phase 划分原则

```
项目周期
├── Phase 1: 基础能力（Foundation）
│   ├── Sprint 1.1: 核心框架
│   ├── Sprint 1.2: 基础功能
│   └── Sprint 1.3: 集成测试
│
├── Phase 2: 核心功能（Core Features）
│   ├── Sprint 2.1: 功能模块A
│   ├── Sprint 2.2: 功能模块B
│   └── Sprint 2.3: 功能集成
│
├── Phase 3: 增强功能（Enhancement）
│   └── ...
│
└── Phase 4: 优化稳定（Optimization）
    └── ...
```

### 4.2 迭代颗粒度

| 层级 | 时间跨度 | 特点 |
|------|----------|------|
| **Phase** | 4-8周 | 里程碑级，有明确的交付目标 |
| **Sprint** | 1-2周 | 迭代级，可独立验收 |
| **Task** | 1-3天 | 任务级，可独立完成 |

### 4.3 子系统划分维度

| 维度 | 说明 | 示例 |
|------|------|------|
| **功能域** | 按业务功能划分 | 用户管理、数据处理、报表 |
| **技术层** | 按技术架构划分 | 前端、后端、数据层 |
| **模块** | 按独立模块划分 | 采集模块、分析模块、展示模块 |

---

## 5. AI 介入点

### 5.1 各工作流的 AI 介入方式

| 工作流 | AI 角色 | 介入方式 |
|--------|---------|----------|
| 规划 | 辅助分析 | 分析需求、建议子系统划分 |
| 设计 | 主导执行 | 基于规则生成设计文档 |
| 实现 | 协作开发 | 代码生成、代码审查 |
| 发布 | 自动执行 | 质量评分、报告生成 |
| 问题修复 | 分析定位 | 问题分析、方案建议 |
| 质量检查 | 自动检查 | 追溯验证、规范检查 |

### 5.2 使用的 Prompt

| 工作流 | System Prompt | User Prompt |
|--------|---------------|-------------|
| 设计 | system_prompt_core.md | user_prompt_document.md |
| 实现 | system_prompt_core.md | user_prompt_code.md |
| 发布 | system_prompt_core.md | user_prompt_release.md |

---

## 6. 工作流文件清单

| 文件 | 说明 | 状态 |
|------|------|------|
| `README.md` | 本文件，工作流体系总览 | ✅ |
| `flow_planning.md` | 规划工作流 | ✅ |
| `flow_design.md` | 设计工作流 | ✅ |
| `flow_implement.md` | 实现工作流 | ✅ |
| `flow_release.md` | 发布工作流 | ✅ |
| `flow_bugfix.md` | 问题修复工作流 | ✅ |
| `flow_change.md` | 需求变更工作流 | ✅ |
| `flow_hotfix.md` | 紧急发布工作流 | ✅ |
| `flow_quality.md` | 质量检查工作流 | ✅ |

---

## 7. 关联文档

- [治理总览](../GOVERNANCE_OVERVIEW.md)
- [L1-L5 架构定义](../ARCHITECTURE_DEFINITION.md)
- [发布规则](../rules/rules_release.md)
- [AI 开发指南](../../Guides/AI_Development_Guide.md)

