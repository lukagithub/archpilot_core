# ç´§æ€¥å‘å¸ƒå·¥ä½œæµï¼ˆHotfix Workflowï¼‰

**å·¥ä½œæµID**: flow_hotfix  
**ç±»åž‹**: ä¸´æ—¶å·¥ä½œæµï¼ˆAd-hocï¼‰  
**è§¦å‘æ¡ä»¶**: çº¿ä¸Šç´§æ€¥é—®é¢˜  
**ç´§æ€¥åº¦**: é«˜

---

## 1. å·¥ä½œæµæ¦‚è¿°

ç´§æ€¥å‘å¸ƒå·¥ä½œæµç”¨äºŽå¤„ç†çº¿ä¸Šç´§æ€¥é—®é¢˜ï¼Œéœ€è¦å¿«é€Ÿä¿®å¤å¹¶å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬ã€‚

### 1.1 ç›®æ ‡

- å¿«é€Ÿå“åº”çº¿ä¸Šé—®é¢˜
- æœ€å°èŒƒå›´ä¿®å¤
- å¿«é€ŸéªŒè¯å‘å¸ƒ
- åŽç»­å®Œå–„è·Ÿè¿›

### 1.2 é€‚ç”¨åœºæ™¯

| åœºæ™¯ | è¯´æ˜Ž |
|------|------|
| çº¿ä¸Šå´©æºƒ | ç³»ç»Ÿä¸å¯ç”¨ |
| æ•°æ®é—®é¢˜ | æ•°æ®ä¸¢å¤±æˆ–æŸåé£Žé™© |
| å®‰å…¨æ¼æ´ž | å®‰å…¨é£Žé™©æš´éœ² |
| ä¸¥é‡Bug | æ ¸å¿ƒåŠŸèƒ½ä¸å¯ç”¨ |

### 1.3 å‚ä¸Žè§’è‰²

| è§’è‰² | èŒè´£ |
|------|------|
| å€¼ç­äººå‘˜ | é—®é¢˜å“åº”ã€åè°ƒ |
| å¼€å‘è€… | å¿«é€Ÿä¿®å¤ |
| æµ‹è¯•äººå‘˜ | å¿«é€ŸéªŒè¯ |
| å‘å¸ƒè´Ÿè´£äºº | æ‰¹å‡†å‘å¸ƒ |

---

## 2. å·¥ä½œæµæ­¥éª¤

```mermaid
flowchart TB
    subgraph Alert["ðŸš¨ å‘Šè­¦"]
        A1["1. é—®é¢˜å‘çŽ°"]
        A2["2. ç´§æ€¥è¯„ä¼°"]
    end

    subgraph Hotfix["ðŸ”¥ ç´§æ€¥ä¿®å¤"]
        H1["3. åˆ›å»º Hotfix åˆ†æ”¯"]
        H2["4. å¿«é€Ÿå®šä½"]
        H3["5. æœ€å°ä¿®å¤"]
        H4["6. å¿«é€Ÿæµ‹è¯•"]
    end

    subgraph Release["ðŸš€ ç´§æ€¥å‘å¸ƒ"]
        R1["7. å®¡æ‰¹å‘å¸ƒ"]
        R2["8. åˆ›å»ºè¡¥ä¸ç‰ˆæœ¬"]
        R3["9. æŽ¨é€å‘å¸ƒ"]
    end

    subgraph Follow["ðŸ“‹ åŽç»­"]
        F1["10. ç›‘æŽ§éªŒè¯"]
        F2["11. é—®é¢˜å¤ç›˜"]
        F3["12. å®Œå–„ä¿®å¤"]
    end

    Alert --> Hotfix --> Release --> Follow
```

---

## 3. è¯¦ç»†æ­¥éª¤è¯´æ˜Ž

### 3.1 é—®é¢˜å‘çŽ°

**é—®é¢˜æ¥æº**:
- ç›‘æŽ§å‘Šè­¦
- ç”¨æˆ·åé¦ˆ
- å†…éƒ¨å‘çŽ°

**ç´§æ€¥é—®é¢˜æŠ¥å‘Š**:
```markdown
## ç´§æ€¥é—®é¢˜æŠ¥å‘Š

**é—®é¢˜ID**: HOTFIX-001
**æŠ¥å‘Šæ—¶é—´**: 2026-02-01 14:30
**æŠ¥å‘Šäºº**: xxx
**ä¸¥é‡çº§åˆ«**: P0 (é˜»å¡ž)

### é—®é¢˜æè¿°
ç”¨æˆ·ç™»å½•åŠŸèƒ½å®Œå…¨å¤±æ•ˆï¼Œæ‰€æœ‰ç”¨æˆ·æ— æ³•ç™»å½•ç³»ç»Ÿã€‚

### å½±å“èŒƒå›´
- å½±å“ç”¨æˆ·: å…¨éƒ¨
- å½±å“åŠŸèƒ½: ç™»å½•ã€è®¤è¯
- ä¸šåŠ¡å½±å“: ç³»ç»Ÿä¸å¯ç”¨

### åˆæ­¥ä¿¡æ¯
- é”™è¯¯æ—¥å¿—: [é™„ä»¶]
- å¼€å§‹æ—¶é—´: çº¦ 14:00
- å¯èƒ½åŽŸå› : å¾…åˆ†æž
```

---

### 3.2 ç´§æ€¥è¯„ä¼°

**è¯„ä¼°æ—¶é—´**: â‰¤15åˆ†é’Ÿ

**è¯„ä¼°å†…å®¹**:
| ç»´åº¦ | è¯„ä¼°é¡¹ |
|------|--------|
| å½±å“èŒƒå›´ | å¤šå°‘ç”¨æˆ·å—å½±å“ |
| ä¸šåŠ¡å½±å“ | æ˜¯å¦é˜»å¡žæ ¸å¿ƒä¸šåŠ¡ |
| æ•°æ®é£Žé™© | æ˜¯å¦æœ‰æ•°æ®æŸå¤±é£Žé™© |
| å®‰å…¨é£Žé™© | æ˜¯å¦æœ‰å®‰å…¨æš´éœ² |

**å†³ç­–**:
- âœ… å¯åŠ¨ Hotfix â†’ ç»§ç»­æµç¨‹
- âš ï¸ éžç´§æ€¥ â†’ è½¬ä¸ºæ™®é€š Bugfix
- â“ éœ€æ›´å¤šä¿¡æ¯ â†’ å¿«é€Ÿæ”¶é›†åŽå†³ç­–

---

### 3.3 åˆ›å»º Hotfix åˆ†æ”¯

**åˆ†æ”¯ç­–ç•¥**:
```bash
# ä»Žæœ€æ–°çš„å‘å¸ƒ Tag åˆ›å»º Hotfix åˆ†æ”¯
git checkout -b hotfix/v0.1.1 v0.1.0
```

**åˆ†æ”¯å‘½å**: `hotfix/v{VERSION}`

---

### 3.4 å¿«é€Ÿå®šä½

**å®šä½æ—¶é—´**: â‰¤30åˆ†é’Ÿ

**å®šä½æ–¹æ³•**:
1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
2. å¯¹æ¯”æœ€è¿‘å˜æ›´
3. æ£€æŸ¥é…ç½®å˜åŒ–
4. åˆ†æžç›‘æŽ§æ•°æ®

**AI ä»‹å…¥ç‚¹**:
```
æç¤ºè¯ï¼š
"ç´§æ€¥åˆ†æžä»¥ä¸‹é”™è¯¯æ—¥å¿—ï¼Œå¿«é€Ÿå®šä½é—®é¢˜åŽŸå› ï¼š
[æ—¥å¿—å†…å®¹]
æœ€è¿‘çš„å˜æ›´ï¼š
[å˜æ›´åˆ—è¡¨]"
```

**å®šä½ç»“æžœ**:
```markdown
### é—®é¢˜å®šä½

**å®šä½æ—¶é—´**: 14:45
**æ ¹å› **: é…ç½®æ–‡ä»¶ä¸­æ•°æ®åº“è¿žæŽ¥å­—ç¬¦ä¸²è¢«æ„å¤–æ¸…ç©º

**é—®é¢˜ä»£ç **:
- æ–‡ä»¶: config/database.conf
- è¡Œå·: 15
- åŽŸå› : éƒ¨ç½²è„šæœ¬ Bug å¯¼è‡´é…ç½®è¢«è¦†ç›–

**å¿«é€ŸéªŒè¯**: æ‰‹åŠ¨æ¢å¤é…ç½®åŽé—®é¢˜æ¶ˆå¤±
```

---

### 3.5 æœ€å°ä¿®å¤

**ä¿®å¤åŽŸåˆ™**:
- âš ï¸ **æœ€å°èŒƒå›´**: åªä¿®å¤é—®é¢˜ï¼Œä¸åšä¼˜åŒ–
- âš ï¸ **æœ€ä½Žé£Žé™©**: é€‰æ‹©æœ€å®‰å…¨çš„ä¿®å¤æ–¹æ¡ˆ
- âš ï¸ **å¯å›žæ»š**: ç¡®ä¿ä¿®å¤å¯å›žæ»š

**ä¿®å¤ä»£ç **:
```cpp
// HOTFIX-001: ä¿®å¤é…ç½®åŠ è½½é—®é¢˜
// TODO: åŽç»­éœ€è¦æ·»åŠ é…ç½®æ ¡éªŒ
if (config.empty()) {
    config = getDefaultConfig();  // ä¸´æ—¶æ–¹æ¡ˆ
    LOG_WARN("Config empty, using default");
}
```

**è¿½æº¯æ³¨é‡Š**:
```cpp
// HOTFIX-001: ç´§æ€¥ä¿®å¤ - é…ç½®ä¸ºç©ºæ—¶ä½¿ç”¨é»˜è®¤å€¼
// åŽç»­è·Ÿè¿›: éœ€è¦åœ¨ flow_bugfix ä¸­å®Œå–„é…ç½®æ ¡éªŒ
```

---

### 3.6 å¿«é€Ÿæµ‹è¯•

**æµ‹è¯•æ—¶é—´**: â‰¤30åˆ†é’Ÿ

**æµ‹è¯•èŒƒå›´**:
| ç±»åž‹ | å†…å®¹ | å¿…é¡» |
|------|------|------|
| å†’çƒŸæµ‹è¯• | æ ¸å¿ƒåŠŸèƒ½å¯ç”¨ | âœ… |
| é—®é¢˜éªŒè¯ | é—®é¢˜å·²ä¿®å¤ | âœ… |
| å›žå½’æµ‹è¯• | ä¸»è¦åŠŸèƒ½ä¸å—å½±å“ | âœ… |
| å®Œæ•´æµ‹è¯• | å…¨éƒ¨æµ‹è¯•ç”¨ä¾‹ | âŒ (åŽç»­) |

**æµ‹è¯•ç»“æžœ**:
```markdown
### å¿«é€Ÿæµ‹è¯•ç»“æžœ

**æµ‹è¯•æ—¶é—´**: 15:15 - 15:30
**æµ‹è¯•äºº**: xxx

| æµ‹è¯•é¡¹ | ç»“æžœ | å¤‡æ³¨ |
|--------|------|------|
| ç™»å½•åŠŸèƒ½ | âœ… PASS | é—®é¢˜å·²ä¿®å¤ |
| ç™»å‡ºåŠŸèƒ½ | âœ… PASS | |
| åŸºç¡€è®¤è¯ | âœ… PASS | |
| æ•°æ®è¯»å– | âœ… PASS | |

**ç»“è®º**: å¯ä»¥å‘å¸ƒ
```

---

### 3.7 å®¡æ‰¹å‘å¸ƒ

**å®¡æ‰¹æ—¶é—´**: â‰¤15åˆ†é’Ÿ

**å®¡æ‰¹å†…å®¹**:
- [ ] é—®é¢˜å·²å®šä½
- [ ] ä¿®å¤å·²éªŒè¯
- [ ] é£Žé™©å¯æŽ§
- [ ] å¯å›žæ»š

**å®¡æ‰¹è®°å½•**:
```markdown
### Hotfix å‘å¸ƒå®¡æ‰¹

**Hotfix ID**: HOTFIX-001
**ç‰ˆæœ¬**: v0.1.1
**å®¡æ‰¹äºº**: xxx
**å®¡æ‰¹æ—¶é—´**: 15:45
**å†³ç­–**: âœ… æ‰¹å‡†å‘å¸ƒ

**å›žæ»šè®¡åˆ’**: å›žæ»šåˆ° v0.1.0
**ç›‘æŽ§é‡ç‚¹**: ç™»å½•æˆåŠŸçŽ‡ã€é”™è¯¯æ—¥å¿—
```

---

### 3.8 åˆ›å»ºè¡¥ä¸ç‰ˆæœ¬

**ç‰ˆæœ¬å·**: åœ¨ PATCH ä½å¢žåŠ 

```bash
# æ›´æ–°ç‰ˆæœ¬å·
echo "v0.1.1" > VERSION

# æäº¤ä¿®å¤
git add -A
git commit -m "hotfix: HOTFIX-001 ä¿®å¤é…ç½®åŠ è½½é—®é¢˜

é—®é¢˜: é…ç½®æ–‡ä»¶ä¸ºç©ºå¯¼è‡´ç™»å½•å¤±è´¥
ä¿®å¤: é…ç½®ä¸ºç©ºæ—¶ä½¿ç”¨é»˜è®¤é…ç½®
æµ‹è¯•: å†’çƒŸæµ‹è¯•é€šè¿‡

HOTFIX-001"
```

**Tag å†…å®¹**:
```
Hotfix v0.1.1: ä¿®å¤é…ç½®åŠ è½½é—®é¢˜

ðŸ”¥ ç´§æ€¥ä¿®å¤
- ä¿®å¤é…ç½®æ–‡ä»¶ä¸ºç©ºå¯¼è‡´çš„ç™»å½•å¤±è´¥é—®é¢˜

âš ï¸ æ³¨æ„äº‹é¡¹
- è¿™æ˜¯ç´§æ€¥ä¿®å¤ç‰ˆæœ¬
- åŽç»­éœ€è¦å®Œå–„é…ç½®æ ¡éªŒé€»è¾‘

ðŸ“‹ å…³è”
- HOTFIX-001
- åŽç»­ä»»åŠ¡: BUG-002 (å®Œå–„é…ç½®æ ¡éªŒ)

âœ… çŠ¶æ€: ç´§æ€¥å‘å¸ƒ
```

```bash
git tag -a v0.1.1 -m "ä¸Šè¿°å†…å®¹"
```

---

### 3.9 æŽ¨é€å‘å¸ƒ

```bash
# æŽ¨é€ Hotfix åˆ†æ”¯
git push origin hotfix/v0.1.1

# æŽ¨é€ Tag
git push origin v0.1.1

# åˆå¹¶å›ž main
git checkout main
git merge hotfix/v0.1.1
git push origin main
```

---

### 3.10 ç›‘æŽ§éªŒè¯

**ç›‘æŽ§æ—¶é—´**: å‘å¸ƒåŽ 1-2 å°æ—¶

**ç›‘æŽ§æŒ‡æ ‡**:
| æŒ‡æ ‡ | æ­£å¸¸èŒƒå›´ | å½“å‰å€¼ | çŠ¶æ€ |
|------|----------|--------|------|
| ç™»å½•æˆåŠŸçŽ‡ | >99% | 99.5% | âœ… |
| é”™è¯¯çŽ‡ | <0.1% | 0.02% | âœ… |
| å“åº”æ—¶é—´ | <500ms | 120ms | âœ… |

**éªŒè¯ç»“è®º**:
- âœ… é—®é¢˜å·²è§£å†³
- âœ… æ— æ–°é—®é¢˜
- âœ… æŒ‡æ ‡æ­£å¸¸

---

### 3.11 é—®é¢˜å¤ç›˜

**å¤ç›˜æ—¶é—´**: å‘å¸ƒåŽ 24-48 å°æ—¶å†…

**å¤ç›˜å†…å®¹**:
```markdown
### HOTFIX-001 å¤ç›˜

#### æ—¶é—´çº¿
| æ—¶é—´ | äº‹ä»¶ |
|------|------|
| 14:00 | é—®é¢˜å¼€å§‹å‘ç”Ÿ |
| 14:30 | å‘çŽ°é—®é¢˜ |
| 14:45 | å®šä½æ ¹å›  |
| 15:30 | ä¿®å¤å®Œæˆ |
| 15:45 | å®¡æ‰¹é€šè¿‡ |
| 16:00 | å‘å¸ƒå®Œæˆ |
| 16:30 | éªŒè¯æ­£å¸¸ |

#### æ ¹å› åˆ†æž
éƒ¨ç½²è„šæœ¬ä¸­å­˜åœ¨ Bugï¼Œåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ä¼šè¦†ç›–é…ç½®æ–‡ä»¶ã€‚

#### æ”¹è¿›æŽªæ–½
| æ”¹è¿›é¡¹ | è´Ÿè´£äºº | è®¡åˆ’æ—¶é—´ |
|--------|--------|----------|
| ä¿®å¤éƒ¨ç½²è„šæœ¬ | dev1 | Sprint 1.3 |
| æ·»åŠ é…ç½®æ ¡éªŒ | dev2 | Sprint 1.3 |
| æ·»åŠ é…ç½®ç›‘æŽ§ | ops1 | Sprint 1.3 |

#### ç»éªŒæ•™è®­
1. éƒ¨ç½²è„šæœ¬éœ€è¦æ›´å®Œå–„çš„æµ‹è¯•
2. é…ç½®æ–‡ä»¶éœ€è¦æœ‰æ•ˆæ€§æ ¡éªŒ
3. éœ€è¦é…ç½®å˜æ›´ç›‘æŽ§
```

---

### 3.12 å®Œå–„ä¿®å¤

**åŽç»­ä»»åŠ¡**:
1. åˆ›å»º Bug å•å®Œå–„ä¿®å¤
2. æ·»åŠ ç›¸å…³æµ‹è¯•ç”¨ä¾‹
3. æ›´æ–°ç›¸å…³æ–‡æ¡£
4. å®žæ–½æ”¹è¿›æŽªæ–½

è½¬å…¥ â†’ [é—®é¢˜ä¿®å¤å·¥ä½œæµ](flow_bugfix.md)

---

## 4. æ—¶é—´çº¿è¦æ±‚

| é˜¶æ®µ | æ—¶é—´è¦æ±‚ | ç´¯è®¡æ—¶é—´ |
|------|----------|----------|
| é—®é¢˜å‘çŽ° | - | - |
| ç´§æ€¥è¯„ä¼° | â‰¤15min | 15min |
| åˆ›å»ºåˆ†æ”¯ | â‰¤5min | 20min |
| å¿«é€Ÿå®šä½ | â‰¤30min | 50min |
| æœ€å°ä¿®å¤ | â‰¤30min | 80min |
| å¿«é€Ÿæµ‹è¯• | â‰¤30min | 110min |
| å®¡æ‰¹å‘å¸ƒ | â‰¤15min | 125min |
| åˆ›å»ºç‰ˆæœ¬ | â‰¤15min | 140min |
| æŽ¨é€å‘å¸ƒ | â‰¤10min | 150min |
| **æ€»è®¡** | | **â‰¤2.5å°æ—¶** |

---

## 5. äº§å‡ºç‰©æ¸…å•

| äº§å‡ºç‰© | å­˜æ”¾ä½ç½® | è¯´æ˜Ž |
|--------|----------|------|
| ç´§æ€¥é—®é¢˜æŠ¥å‘Š | `Progress/hotfix/` | é—®é¢˜è®°å½• |
| Hotfix åˆ†æ”¯ | Git | ä¿®å¤ä»£ç  |
| è¡¥ä¸ç‰ˆæœ¬ Tag | Git | v0.1.1 |
| å¤ç›˜æŠ¥å‘Š | `Progress/hotfix/` | ç»éªŒæ€»ç»“ |

---

## 6. å›žæ»šè®¡åˆ’

**å›žæ»šè§¦å‘æ¡ä»¶**:
- ä¿®å¤å¯¼è‡´æ–°é—®é¢˜
- é—®é¢˜æœªè§£å†³
- æ€§èƒ½ä¸¥é‡ä¸‹é™

**å›žæ»šæ­¥éª¤**:
```bash
# å›žæ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬
git checkout v0.1.0

# é‡æ–°éƒ¨ç½²
# [éƒ¨ç½²å‘½ä»¤]

# é€šçŸ¥ç›¸å…³æ–¹
```

---

## 7. å…³è”å·¥ä½œæµ

- **æ¥æº**: ç›‘æŽ§å‘Šè­¦ / ç”¨æˆ·åé¦ˆ
- **åŽç»­**: [é—®é¢˜ä¿®å¤å·¥ä½œæµ](flow_bugfix.md)ï¼ˆå®Œå–„ä¿®å¤ï¼‰
- **åˆå¹¶**: [å‘å¸ƒå·¥ä½œæµ](flow_release.md)ï¼ˆåˆå¹¶åˆ°ä¸»ç‰ˆæœ¬ï¼‰

---

## 8. å˜æ›´åŽ†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|------|----------|
| v1.0.0 | 2026-02-01 | åˆå§‹ç‰ˆæœ¬ |

